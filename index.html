<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Оплата</title>
  </head>
  <body>
    <p id="amount"></p>
    <button onclick="makePay()">Оплатить</button>

    <script>
      function getQueryParam(param) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(param);
      }

      const amount = getQueryParam("amount");
      document.getElementById(
        "amount"
      ).textContent = `Сумма к оплате: ${amount} руб.`;

      function makePay() {
        document.getElementById("amount").textContent =
          "оплата успешно выполнена";

        if (window.opener) {
          window.opener.postMessage({ amount: amount }, 'https://mamyruly.github.io');
          window.close();
        } else {
          alert('Оплата успешно произведена, но не удалось отправить данные на первую страницу.');
        }
      }
    </script>
  </body>
</html>
